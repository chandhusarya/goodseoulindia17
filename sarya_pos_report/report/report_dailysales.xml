<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>
        <template id="report_dailysales">
            <t t-set="company" t-value="env.company"/>
            <div class="oe_structure"></div>
            <t t-call="web.html_container">
                <t t-call="web.internal_layout">
                    <div class="page">
                        <div style="break-inside: avoid;">
                            <t t-if="state == 'multiple'">
                                <div class="text-center">
                                    <h2>DSR - Daily Sales Report</h2>
                                    <div class="oe_structure"></div>
                                    <t t-if="config_names">
                                        <strong>Outlet Names:</strong>
                                        <t t-foreach="config_names" t-as="name">
                                            <span t-out="name">Unknown Outlet Name</span>,
                                        </t>
                                    </t>
                                </div>
                            </t>
                            <t t-else="">
                                <div class="text-center">
                                    <h2 t-if="state == 'closed' or state == 'opened'">DSR - Daily Sales Report
                                        <t t-if="state == 'closed'">Z</t>
                                        <t t-else="">X</t>
                                    </h2>
                                </div>
                                <div class="oe_structure"></div>
                                <div class="text-left">
                                    <t t-if="session_name">
                                        Session ID :
                                        <span t-out="session_name">987657</span>
                                    </t>
                                </div>
                            </t>
                            <br/>
                            <div class="text-right">
                                <t t-if="date_start and date_stop">
                                    <b>Business Date :</b>
                                    <span t-out="date_start" t-options="{'widget': 'datetime'}">2-03-2000 9:00 AM</span>
                                    -
                                    <span t-out="date_stop" t-options="{'widget': 'datetime'}">Demo 3-03-2000 5:00 PM
                                    </span>
                                </t>
                                <br/>
                                <t t-if="current_time">
                                    <b>Generated On :</b>
                                    <span t-out="current_time" t-options="{'widget': 'datetime'}">2-03-2000 9:00 AM
                                    </span>
                                </t>
                                <br/>
                                <t t-if="current_time">
                                    <b>Generated By :</b>
                                    <span t-out="generated_by"/>
                                </t>
                            </div>
                        </div>
                        <br/>
                        <br/>
                        <div class="oe_structure"></div>


                        <div class="row">
                            <div class="col-xs-6" t-if="products" id="sales">
                                <h3>Sales Summary</h3>
                                <div class="oe_structure"></div>
                                <table class="table table-sm">
                                    <thead>
                                        <tr>
                                            <th class="text-start">Sales</th>
                                            <th class="text-end">Sales Amount</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td class="text-start">Total Revenue</td>
                                            <td class="text-end">
                                                <strong>
                                                    <span t-out='currency["symbol"]'>$</span>
                                                    <span t-esc='products_info["total"]+refund_info["total"]'
                                                          t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                        1000
                                                    </span>
                                                </strong>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="text-start">Tax Collected</td>
                                            <td class="text-end">
                                                <strong>
                                                    <span t-out='currency["symbol"]'>$</span>
                                                    <span t-esc='taxes_info["tax_amount"]+refund_taxes_info["tax_amount"]'
                                                          t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                        0.00
                                                    </span>
                                                </strong>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="text-start">Net Sales</td>
                                            <td class="text-end">
                                                <strong>
                                                    <span t-out='currency["symbol"]'>$</span>
                                                    <t t-set="net_sale_amount"
                                                       t-value='products_info["total"]+refund_info["total"]+taxes_info["tax_amount"]+refund_taxes_info["tax_amount"]'/>
                                                    <span t-esc='net_sale_amount'
                                                          t-options="{'widget': 'float', 'precision': currency['precision']}"/>
                                                </strong>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="text-start">Transactions</td>
                                            <td class="text-end">
                                                <strong>
                                                    <span t-esc="nbr_orders"/>
                                                </strong>
                                            </td>
                                        </tr>
                                        <tr>
                                            <td class="text-start">APC</td>
                                            <td class="text-end">
                                                <t t-set="apc_value" t-value="net_sale_amount / nbr_orders"/>
                                                <strong>
                                                    <span t-esc="apc_value"
                                                          t-options="{'widget': 'float', 'precision': currency['precision']}"/>
                                                </strong>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <br/>

                        <div class="oe_structure"></div>
                        <t t-if="taxes" id="taxe_sales">
                            <h3>Taxes on sales</h3>
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th class="text-start">Name</th>
                                        <th class="text-end">Tax Amount</th>
                                        <th class="text-end">Base Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-foreach='taxes' t-as='tax'>
                                        <td>
                                            <span t-out="tax['name']">Demo Name</span>
                                        </td>
                                        <td class="text-end">
                                            <t t-if="currency['position']">
                                                <span t-out="tax['tax_amount']"
                                                      t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                    0.00
                                                </span>
                                                <span t-out='currency["symbol"]'>$</span>
                                            </t>
                                            <t t-else="">
                                                <span t-out='currency["symbol"]'>$</span>
                                                <span t-out="tax['tax_amount']"
                                                      t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                    0.00
                                                </span>
                                            </t>

                                        </td>
                                        <td class="text-end">
                                            <t t-if="currency['position']">
                                                <span t-out="tax['base_amount']"
                                                      t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                    0.00
                                                </span>
                                                <span t-out='currency["symbol"]'>$</span>
                                            </t>
                                            <t t-else="">
                                                <span t-out='currency["symbol"]'>$</span>
                                                <span t-out="tax['base_amount']"
                                                      t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                    0.00
                                                </span>
                                            </t>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="background-color: #b1b1b1;">
                                            <strong>Total</strong>
                                        </td>
                                        <td class="text-end" style="background-color: #b1b1b1;">
                                            <t t-if="currency['position']">
                                                <strong>
                                                    <span t-out='taxes_info["tax_amount"]'
                                                          t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                        0.00
                                                    </span>
                                                    <span t-out='currency["symbol"]'>$</span>
                                                </strong>
                                            </t>
                                            <t t-else="">
                                                <strong>
                                                    <span t-out='currency["symbol"]'>$</span>
                                                    <span t-out='taxes_info["tax_amount"]'
                                                          t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                        0.00
                                                    </span>
                                                </strong>
                                            </t>
                                        </td>
                                        <td class="text-end" style="background-color: #b1b1b1;">
                                            <t t-if="currency['position']">
                                                <strong>
                                                    <span t-out='taxes_info["base_amount"]'
                                                          t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                        0.00
                                                    </span>
                                                    <span t-out='currency["symbol"]'>$</span>
                                                </strong>
                                            </t>
                                            <t t-else="">
                                                <strong>
                                                    <span t-out='currency["symbol"]'>$</span>
                                                    <span t-out='taxes_info["base_amount"]'
                                                          t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                        0.00
                                                    </span>
                                                </strong>
                                            </t>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <div class="oe_structure"></div>
                        </t>
                        <div class="oe_structure"></div>
                        <br/>

                        <!-- Orderlines -->
                        <div class="col-xs-6" t-if="products" id="sales">
                            <h3>Category Wise Sales</h3>
                            <div class="oe_structure"></div>
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th class="text-start">Product Category</th>
                                        <th class="text-end">Total (VAT excluded)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-foreach="products" t-as="category">
                                        <td style="background-color: #dadada;">
                                            <span t-out="category['name']">Technical Stuffs</span>
                                        </td>
                                        <td class="text-end" style="background-color: #dadada;">
                                            <t t-if="currency['position']">
                                                <span t-out="category['total']"
                                                      t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                    10000.00
                                                </span>
                                                <span t-out='currency["symbol"]'>$</span>
                                            </t>
                                            <t t-else="">
                                                <span t-out='currency["symbol"]'>$</span>
                                                <span t-out="category['total']"
                                                      t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                    10000.00
                                                </span>
                                            </t>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="background-color: #b1b1b1;">
                                            <strong>Total</strong>
                                        </td>
                                        <td class="text-end" style="background-color: #b1b1b1;">
                                            <t t-if="currency['position']">
                                                <strong>
                                                    <span t-out='products_info["total"]'
                                                          t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                        10000
                                                    </span>
                                                    <span t-out='currency["symbol"]'>$</span>
                                                </strong>
                                            </t>
                                            <t t-else="">
                                                <strong>
                                                    <span t-out='currency["symbol"]'>$</span>
                                                    <span t-out='products_info["total"]'
                                                          t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                        1000
                                                    </span>
                                                </strong>
                                            </t>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="oe_structure"></div>
                        <br/>
                        <br/>
                        <t t-if="refund_products" id="refunds">
                            <h3>Refunds</h3>
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th class="text-start">Product Category</th>
                                        <th class="text-end">Total (VAT excluded)</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-foreach="refund_products" t-as="category">
                                        <td style="background-color: #dadada;">
                                            <span t-out="category['name']">Technical Stuff</span>
                                        </td>
                                        <td class="text-end" style="background-color: #dadada;">
                                            <t t-if="currency['position']">
                                                <span t-out="category['total']"
                                                      t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                    0.00
                                                </span>
                                                <span t-out='currency["symbol"]'>$</span>
                                            </t>
                                            <t t-else="">
                                                <span t-out='currency["symbol"]'>$</span>
                                                <span t-out="category['total']"
                                                      t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                    0.00
                                                </span>
                                            </t>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="background-color: #b1b1b1;">
                                            <strong>Total</strong>
                                        </td>
                                        <td class="text-end" style="background-color: #b1b1b1;">
                                            <t t-if="currency['position']">
                                                <strong>
                                                    <span t-out='refund_info["total"]'
                                                          t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                        0.00
                                                    </span>
                                                    <span t-out='currency["symbol"]'>$</span>
                                                </strong>
                                            </t>
                                            <t t-else="">
                                                <strong>
                                                    <span t-out='currency["symbol"]'>$</span>
                                                    <span t-out='refund_info["total"]'
                                                          t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                        0.00
                                                    </span>
                                                </strong>
                                            </t>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <div class="oe_structure"></div>
                        </t>

                        <t t-if="refund_taxes" id="taxe_refunds">
                            <h3>Taxes on refunds</h3>
                            <table class="table table-sm">
                                <thead>
                                    <tr>
                                        <th class="text-start">Name</th>
                                        <th class="text-end">Tax Amount</th>
                                        <th class="text-end">Base Amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-foreach='refund_taxes' t-as='tax'>
                                        <td>
                                            <span t-out="tax['name']">Tax Name</span>
                                        </td>
                                        <td class="text-end">
                                            <span t-if="currency['position']">
                                                <span t-out="tax['tax_amount']"
                                                      t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                    123.45
                                                </span>
                                                <span t-out='currency["symbol"]'>$</span>
                                            </span>
                                            <span t-else="">
                                                <span t-out='currency["symbol"]'>$</span>
                                                <span t-out="tax['tax_amount']"
                                                      t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                    123.45
                                                </span>
                                            </span>
                                        </td>
                                        <td class="text-end">
                                            <span t-if="currency['position']">
                                                <span t-out="tax['base_amount']"
                                                      t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                    123.45
                                                </span>
                                                <span t-out='currency["symbol"]'>$</span>
                                            </span>
                                            <span t-else="">
                                                <span t-out='currency["symbol"]'>$</span>
                                                <span t-out="tax['base_amount']"
                                                      t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                    123.45
                                                </span>
                                            </span>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="background-color: #b1b1b1;">
                                            <strong>Total</strong>
                                        </td>
                                        <td class="text-end" style="background-color: #b1b1b1;">
                                            <span t-if="currency['position']">
                                                <strong>
                                                    <span t-out='refund_taxes_info["tax_amount"]'
                                                          t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                        123.45
                                                    </span>
                                                    <span t-out='currency["symbol"]'>$</span>
                                                </strong>
                                            </span>
                                            <span t-else="">
                                                <strong>
                                                    <span t-out='currency["symbol"]'>$</span>
                                                    <span t-out='refund_taxes_info["tax_amount"]'
                                                          t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                        123.45
                                                    </span>
                                                </strong>
                                            </span>
                                        </td>
                                        <td class="text-end" style="background-color: #b1b1b1;">
                                            <span t-if="currency['position']">
                                                <strong>
                                                    <span t-out='refund_taxes_info["base_amount"]'
                                                          t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                        123.45
                                                    </span>
                                                    <span t-out='currency["symbol"]'>$</span>
                                                </strong>
                                            </span>
                                            <span t-else="">
                                                <strong>
                                                    <span t-out='currency["symbol"]'>$</span>
                                                    <span t-out='refund_taxes_info["base_amount"]'
                                                          t-options="{'widget': 'float', 'precision': currency['precision']}">
                                                        123.45
                                                    </span>
                                                </strong>
                                            </span>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <div class="oe_structure"></div>
                        </t>
                        <div class="oe_structure"></div>
                        <br/>
                        <t t-if="payment_summary" id="payment_summary">
                            <h3>Payment Methods:</h3>
                            <table class="table table-sm">
                                <thead>
                                    <th class="text-start">Method</th>
                                    <th class="text-end">Amount</th>
                                </thead>
                                <tr t-foreach="payment_summary" t-as="pay" t-if="pay != 'Total'">
                                    <td>
                                        <span t-out="pay">Bank</span>
                                    </td>
                                    <td class="text-end">
                                        <span t-out='currency["symbol"]'>$</span>
                                        <span t-out="payment_summary[pay]"
                                              t-options="{'widget': 'float', 'precision': currency['precision']}">0.00
                                        </span>
                                    </td>
                                </tr>
                                <tr t-foreach="payment_summary" t-as="pay" t-if="pay == 'Total'">
                                    <td style="background-color: #b1b1b1;">
                                        <span t-out="pay">Total</span>
                                    </td>
                                    <td style="background-color: #b1b1b1;" class="text-end">
                                        <span t-out='currency["symbol"]'>$</span>
                                        <span t-out="payment_summary[pay]"
                                              t-options="{'widget': 'float', 'precision': currency['precision']}">0.0
                                        </span>
                                    </td>
                                </tr>

                            </table>
                        </t>
                        <div class="oe_structure"></div>
                        <br/>
                        <!--                <t t-if="order_types" id="order_types">-->
                        <!--                    <h3>Channel Wise Details:</h3>-->
                        <!--                    <table  class="table table-sm">-->
                        <!--                        <thead>-->
                        <!--                            <th class="text-start">Channel</th>-->
                        <!--                            <th class="text-end">Count</th>-->
                        <!--                            <th class="text-end">Sales</th>-->
                        <!--                        </thead>-->
                        <!--                        <tr t-foreach="order_types" t-as="order_type" t-if="order_type != 'Total'">-->
                        <!--                            <td><span t-out="order_type">Dine In</span></td>-->
                        <!--                            <td class="text-end">-->
                        <!--                                <span t-out="order_types[order_type]['count']">0.0</span>-->
                        <!--                            </td>-->
                        <!--                            <td class="text-end">-->
                        <!--                                <span t-out='currency["symbol"]'>$</span><span t-out="order_types[order_type]['sales']" t-options="{'widget': 'float', 'precision': currency['precision']}">0.0</span>-->
                        <!--                            </td>-->
                        <!--                        </tr>-->
                        <!--                        <tr t-foreach="order_types" t-as="order_type" t-if="order_type == 'Total'">-->
                        <!--                            <td style="background-color: #b1b1b1;">-->
                        <!--                                <span t-out="order_type">Total</span>-->
                        <!--                            </td>-->
                        <!--                            <td style="background-color: #b1b1b1;" class="text-end">-->
                        <!--                                <span t-out="order_types[order_type]['count']">0.0</span>-->
                        <!--                            </td>-->
                        <!--                            <td style="background-color: #b1b1b1;" class="text-end">-->
                        <!--                                <span t-out='currency["symbol"]'>$</span><span t-out="order_types[order_type]['sales']" t-options="{'widget': 'float', 'precision': currency['precision']}">0.0</span>-->
                        <!--                            </td>-->
                        <!--                        </tr>-->

                        <!--                    </table>-->
                        <!--                </t>-->
                        <div class="oe_structure"></div>
                        <br/>
                        <t t-if="discount_amount > 0" id="discounts">
                            <h3>Discounts</h3>
                            <table class="table table-sm">
                                <thead>
                                    <th class="text-start">Number of discounts</th>
                                    <th class="text-end">Amount of discounts</th>
                                </thead>
                                <tr>
                                    <td>
                                        <span t-out="discount_number">0.0</span>
                                    </td>
                                    <td class="text-end">
                                        <span t-out="discount_amount">0.0</span>
                                    </td>
                                </tr>
                            </table>
                        </t>

                        <div class="oe_structure"></div>
                    </div>

                </t>
            </t>
        </template>
    </data>
</odoo>
