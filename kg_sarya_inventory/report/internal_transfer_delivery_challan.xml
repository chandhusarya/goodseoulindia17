<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <template id="delivery_challan_internal_transfer_body">
                <style>
                .page {
                    font-family: Arial, Helvetica, sans-serif;
                    font-size:12px;
                    width:100%;
                }
                .header_table {
                    border-collapse:collapse;
                    font-size:13px;
                    border: 1px solid #484848;
                }
                .header_table td {
                    border: 1px solid #484848;
                }
                .product_table {
                    border-collapse:collapse;
                    font-size:12px;
                    border: 1px solid #ddd;
                }
                .product_table td {
                    border: 1px solid #484848;
                    text-align:center;
                    padding:5px;
                }
                .product_table thead {
                    font-weight: bold;
                }
                .other_table {
                    border-collapse:collapse;
                    font-size:12px;
                    border: 1px solid #484848;
                }
                .other_table td {
                    border: 1px solid #484848;
                    padding:5px;
                }
                .missing {
                    color:red;
                }

                </style>


                <table class="header_table" width="100%">
                    <tbody>
                        <tr>
                            <td style="padding:10px;" width="35%">
                                <p><b>From :</b></p>
                                <b><span class="text-left" t-field="o.location_src_id.address_id.name"/></b><br/>
                                <t t-if="o.location_src_id.address_id.street"><span t-field="o.location_src_id.address_id.street"/></t>, <t t-if="o.location_src_id.address_id.street2"><span t-field="o.location_src_id.address_id.street2"/><br/>
                                </t><t t-if="o.location_src_id.address_id.city"><span t-field="o.location_src_id.address_id.city"/></t>, <t t-if="o.location_src_id.address_id.zip"><span t-field="o.location_src_id.address_id.zip"/></t><br/><br/>
                                <t t-if="o.location_src_id.address_id.state_id"><span><b>STATE : </b><t t-esc="o.location_src_id.address_id.state_id.name"/></span></t><br/>
                                <t t-if="o.location_src_id.address_id.state_id"><span><b>STATE CODE : </b><t t-esc="o.location_src_id.address_id.state_id.gst_code"/></span></t><br/>
                                <t t-if="o.location_src_id.address_id.l10n_in_pan"><span><b>PAN # : </b><t t-esc="o.location_src_id.address_id.l10n_in_pan"/></span></t><br/>
                                <t t-if="o.location_src_id.address_id.vat"><span><b>GST # : </b><t t-esc="o.location_src_id.address_id.vat"/></span></t><br/>
                                <t t-if="o.location_src_id.address_id.fssai_no"><span><b>FSSAI # : </b><t t-esc="o.location_src_id.address_id.fssai_no"/></span></t>
                            </td>
                            <td style="padding:10px;" width="35%">
                                <p><b>Ship To :</b></p>
                                <b><span class="text-left" t-field="o.location_dest_id.address_id.name"/></b><br/>
                                <t t-if="o.location_dest_id.address_id.street"><span t-field="o.location_dest_id.address_id.street"/></t>, <t t-if="o.location_dest_id.address_id.street2"><span t-field="o.location_dest_id.address_id.street2"/><br/>
                                </t><t t-if="o.location_dest_id.address_id.city"><span t-field="o.location_dest_id.address_id.city"/></t>, <t t-if="o.location_dest_id.address_id.zip"><span t-field="o.location_dest_id.address_id.zip"/></t><br/><br/>
                                <t t-if="o.location_dest_id.address_id.state_id"><span><b>STATE : </b><t t-esc="o.location_dest_id.address_id.state_id.name"/></span></t><br/>
                                <t t-if="o.location_dest_id.address_id.state_id"><span><b>STATE CODE : </b><t t-esc="o.location_dest_id.address_id.state_id.gst_code"/></span></t><br/>
                                <t t-if="o.location_dest_id.address_id.l10n_in_pan"><span><b>PAN # : </b><t t-esc="o.location_dest_id.address_id.l10n_in_pan"/></span></t><br/>
                                <t t-if="o.location_dest_id.address_id.vat"><span><b>GST # : </b><t t-esc="o.location_dest_id.address_id.vat"/></span></t><br/>
                                <t t-if="o.location_dest_id.address_id.fssai_no"><span><b>FSSAI # : </b><t t-esc="o.location_dest_id.address_id.fssai_no"/></span></t>
                                <t t-if="o.location_dest_id.address_id.delivery_contact"><span><b>CONTACT # : </b><t t-esc="o.location_dest_id.address_id.delivery_contact"/></span></t>
                            </td>
                            <td style="padding:5px;" width="30%">

                                <p><b>Transfer No :</b><t t-esc="o.name"/> </p>
                                <p><b>Transfer Date :</b><t t-if="o.stock_required_on" t-esc="o.stock_required_on.strftime('%d/%m/%Y')"/></p>
                                <p><b>From WH Responsible :</b><t t-foreach="o.from_wh_responsible_employee" t-as="from_wh_emp"><t t-esc="from_wh_emp.name"/>,</t></p>
                                <p><b>To WH Responsible :</b><t t-foreach="o.to_wh_responsible_employee" t-as="to_wh_emp"><t t-esc="to_wh_emp.name"/>,</t></p>

                            </td>
                        </tr>
                    </tbody>
                </table>




                <table class="product_table" width="100%">
                    <thead>
                        <tr>
                            <td colspan="9">PRODUCT DETAILS</td>
                        </tr>
                        <tr>
                            <td>SL #</td>
                            <td>DESCRIPTION</td>
                            <td>HSN CODE</td>
                            <td>QTY</td>
                            <td>UQC</td>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-set="total_qty" t-value="0"/>
                        <t t-set="line_index" t-value="0"/>
                        <tr t-foreach="o.transfer_lines" t-as="line">
                            <td><span t-esc="line_index+1"/> </td>
                            <td><span t-esc="line.product_id.name"/> </td>
                            <td><span t-esc="line.product_id.l10n_in_hsn_code"/> </td>
                            <td><span t-esc="line.stock_transferred"/> </td>
                            <td><span t-esc="line.packaging_id.name"/> </td>
                             <t t-set="total_qty" t-value="line.stock_transferred+total_qty"/>
                        </tr>
                        <tr>
                            <td><b>Total</b> </td>
                            <td></td>
                            <td></td>
                            <td><t t-esc="total_qty"/></td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
                <table class="other_table" width="100%">
                    <tbody>
                        <t t-set="tax_total" t-value="0"/>
                        <tr>
                            <td width="45%" rowspan="5">
                                <span>This is a Computer generated document</span><br/>
                                <span>Net Wt ( Kg ) :<t t-esc="o.total_product_weight"/> </span><br/>
                                <span>Gross Wt ( Kg) :<t t-esc="o.total_product_gross_weight"/></span><br/><br/>
                            </td>
                        </tr>


                    </tbody>
                </table>











        </template>




        <template id="delivery_challan_internal_transfer">
            <template id="report_header_custom" inherit_id="web.external_layout_header">
                <xpath expr="//div[@class='header']" position="replace">
                    <div class="header col-xs-12">
                        <div class="col-xs-4" style="min-width:33%;padding: 0px; margin: 0px; display: inline-block;">
                            <img style="padding: 0px; margin: 0px; max-width: 100%;"
                                 t-att-src="image_data_uri(o.company_id.logo)" width="100px" height="100px"/>
                        </div>
                        <div class="col-xs-5" style="min-width:33%;text-align: center;min-height:30px;display: flex;justify-content: center;display: inline-block;align-items: center;">
                            <span><h4>DELIVERY CHALLAN</h4></span>
                        </div>
                        <div class="col-xs-3 pull-left" style="float:right;min-width:33%;display: inline-block;font-size: 10pt;line-height: 13px;">
                            <br/>
                        </div>
                    </div>
                </xpath>
            </template>
            <t t-call="web.external_layout">
            <div class="oe_structure"/>
                <div class="page">
                    <t t-call="kg_sarya_inventory.delivery_challan_internal_transfer_body"/>
                </div>
            </t>
        </template>


        <template id="report_delivery_challan_internal_transfer" >
            <t t-call="web.html_container">
                <t t-call-assets="web.assets_common"/>
                <t t-foreach="docs" t-as="o">
                    <t t-call="kg_sarya_inventory.delivery_challan_internal_transfer"/>
                </t>
            </t>
        </template>

    </data>
</odoo>