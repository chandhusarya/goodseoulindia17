<?xml version="1.0" encoding="UTF-8"?>
<!--<odoo>
    <template inherit_id="hr_holidays.TimeOffDashboard" name="Change Balance Label in TimeOffDashboard">
        <xpath expr="//div[@class='row justify-content-center align-items-center border-bottom h-50 w-100 p-1']" position="replace">
            Balance as of
            <div class="p-1" style="max-width: 100px!important">
                <DateTimeInput
                    type="'date'"
                    value="state.date"
                    onChange="(date) => this.loadDashboardData(date)"
                    minDate="state.today"
                    placeholder="'Today'"/>
            </div>
            <button class="o_timeoff_today_button btn btn-secondary" t-on-click="resetDate">Today</button>
        </xpath>
    </template>
</odoo>-->

<!--<odoo>-->
  <!--<template inherit_id="hr_holidays.TimeOffDashboard" name="Add Leave Utilised to TimeOffDashboard">

    <xpath expr="//TimeOffCard" position="after">
      <t t-foreach="state.utilised_holidays" t-as="utilised" t-key="utilised[2]">
        <div class="o_timeoff_card p-3">
          <div class="text-muted">Utilised</div>
          <div class="h3"><t t-esc="utilised[1]"/></div>
          <div><t t-esc="utilised[0]"/></div>
        </div>
      </t>
    </xpath>

  </template>-->
<!--  <templates xml:space="preserve">-->
    <!--<div t-name="hr_holidays.TimeOffDashboard" class="o_timeoff_dashboard">
        <t t-foreach="state.holidays" t-as="holiday" t-key="holiday[3]">
            <TimeOffCard
                name="holiday[0]"
                data="holiday[1]"
                requires_allocation="holiday[2] == 'yes'"
                holidayStatusId="holiday[3]"
                employeeId="props.employeeId"/>
            <div class="o_timeoff_card p-3">
              <div class="text-muted">Utilised</div>
              <div class="h3"><t t-esc="utilised[1]"/></div>
              <div><t t-esc="utilised[0]"/></div>
            </div>
        </t>
        <div class="o_timeoff_card p-0 d-flex justify-content-around">
            <div class="row justify-content-center align-items-center border-bottom h-50 w-100 p-1" t-if="has_accrual_allocation()">
                Balance at the
                <div class="p-1" style="max-width: 100px!important">
                    <DateTimeInput
                        type="'date'"
                        value="state.date"
                        onChange="(date) => this.loadDashboardData(date)"
                        minDate="state.today"
                        placeholder="'Today'"/>
                </div>
                <button class="o_timeoff_today_button btn btn-secondary" t-on-click="resetDate">Today</button>
            </div>
            <div class="row justify-content-center align-items-center h-50 w-100">
                <button class="btn btn-secondary m-auto" t-on-click="newAllocationRequest" type="button" style="width: fit-content;">
                    <t t-if="employeeId">Grant Time</t>
                    <t t-else="">New Allocation Request</t>
                </button>
            </div>
        </div>
    </div>-->
<!--  </templates>-->

<odoo>
  <template t-name="hr_holidays.TimeOffDashboard">
    <div class="o_timeoff_dashboard">
      <t t-foreach="state.holidays" t-as="holiday" t-key="holiday[3]">
        <TimeOffCard
          name="holiday[0]"
          data="holiday[1]"
          requires_allocation="holiday[2] == 'yes'"
          holidayStatusId="holiday[3]"
          employeeId="props.employeeId"/>

        <!-- Add Utilised Section (optional grouping per holiday) -->
        <t t-if="state.utilised and holiday[3] in state.utilised">
          <div class="o_timeoff_card p-3">
            <div class="text-muted">Utilised</div>
            <div class="h3">
              <t t-esc="state.utilised[holiday[3]]"/>
            </div>
            <div><t t-esc="holiday[0]"/></div>
          </div>
        </t>
      </t>

      <div class="o_timeoff_card p-0 d-flex justify-content-around">
        <div class="row justify-content-center align-items-center border-bottom h-50 w-100 p-1" t-if="has_accrual_allocation()">
          Balance as of
          <div class="p-1" style="max-width: 100px!important">
            <DateTimeInput
              type="'date'"
              value="state.date"
              onChange="(date) => this.loadDashboardData(date)"
              minDate="state.today"
              placeholder="'Today'"/>
          </div>
          <button class="o_timeoff_today_button btn btn-secondary" t-on-click="resetDate">Today</button>
        </div>
        <div class="row justify-content-center align-items-center h-50 w-100">
          <button class="btn btn-secondary m-auto" t-on-click="newAllocationRequest" type="button" style="width: fit-content;">
            <t t-if="employeeId">Grant Time</t>
            <t t-else="">New Allocation Request</t>
          </button>
        </div>
      </div>
    </div>
  </template>
</odoo>
