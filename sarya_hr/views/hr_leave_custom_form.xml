<?xml version='1.0' encoding='UTF-8' ?>
<odoo>
    <record id="hr_leave_view_custom_sarya_form" model="ir.ui.view">
        <field name="name">hr.leave.view.form</field>
        <field name="model">hr.leave</field>
        <field name="priority">32</field>
        <field name="arch" type="xml">
            <form string="Time Off Request" class="o_hr_leave_form">
                <field name="active" invisible="1"/>
                <field name="can_reset" invisible="1"/>
                <field name="can_approve" invisible="1"/>
                <field name="can_cancel" invisible="1"/>
                <field name="has_mandatory_day" invisible="1"/>
                <header>
                    <button string="Confirm" name="action_confirm" type="object" class="oe_highlight" invisible="state != 'draft' or not active"/>
                    <button string="Approve" name="action_approve" type="object" class="oe_highlight" invisible="not active or not can_approve or state != 'confirm'"/>
                    <button string="Validate" name="action_validate" invisible="state != 'validate1'" type="object" groups="hr_holidays.group_hr_holidays_user" class="oe_highlight"/>
                    <button string="Refuse" name="action_refuse" type="object" invisible="not active or not can_approve or state not in ('confirm', 'validate1', 'validate')"/>
                    <button string="Cancel" name="action_cancel" type="object" invisible="not active or not can_cancel" />
                    <button string="Mark as Draft" name="action_draft" type="object"
                            invisible="not can_reset or state not in ['confirm', 'refuse']"/>
                    <field name="state" widget="statusbar" statusbar_visible="confirm,validate" invisible="not active"/>
                </header>
                <sheet>
                    <widget name="web_ribbon" title="Canceled" bg_color="text-bg-danger" invisible="active"/>
                    <div class="alert alert-info" role="alert" invisible="not request_unit_hours or not tz_mismatch or holiday_type == 'category'">
                        <span invisible="holiday_type != 'employee'">
                            The employee has a different timezone than yours! Here dates and times are displayed in the employee's timezone
                        </span>
                        <span invisible="holiday_type != 'department'">
                            The department's company has a different timezone than yours! Here dates and times are displayed in the company's timezone
                        </span>
                        <span invisible="holiday_type != 'company'">
                            The company has a different timezone than yours! Here dates and times are displayed in the company's timezone
                        </span>
                        (<field name="tz"/>).
                    </div>
                    <field name="tz_mismatch" invisible="1"/>
                    <field name="holiday_type" invisible="1" readonly="state not in ['confirm', 'draft']"/>
                    <field name="leave_type_request_unit" invisible="1"/>
                    <div class="o_hr_leave_content row my-n4">
                        <div class="o_hr_leave_column col_left col-md-6 col-12">
                            <div name="title" class="o_hr_leave_title" invisible="1">
                                <field name="employee_id" readonly="1" force_save="1" invisible="1"/>
                                <field name="employee_ids" invisible="1" readonly="state in ['cancel', 'refuse', 'validate', 'validate1']"/>
                                <field name="display_name" invisible="not holiday_status_id"/>
                            </div>
                            <field name="leave_type_increases_duration" invisible="True"/>
                            <div name="duration_warning" invisible="not leave_type_increases_duration" class="alert alert-warning mb-0" role="alert">
                                <span >You can only take this time off in whole days, so if your schedule has half days, it won't be used efficiently.</span>
                            </div><br />
                            <group name="col_left">
                                <field name="employee_company_id" invisible="1"/>
                                <field name="holiday_status_id" force_save="1"
                                       domain="[
                                    '|',
                                        ('requires_allocation', '=', 'no'),
                                        '&amp;',
                                            ('has_valid_allocation', '=', True),
                                            '&amp;',
                                                ('max_leaves', '>', '0'),
                                                '|',
                                                    ('allows_negative', '=', True),
                                                    '&amp;',
                                                        ('virtual_remaining_leaves', '&gt;', 0),
                                                        ('allows_negative', '=', False),
                                ]"
                                       context="{'employee_id': employee_id, 'default_date_from': date_from, 'default_date_to': date_to}"
                                       options="{'no_create': True, 'no_open': True, 'request_type': 'leave'}"
                                       readonly="state in ['cancel', 'refuse', 'validate', 'validate1']"/>
                                <field name="date_from" invisible="1"/>
                                <field name="date_to" invisible="1"/>
                                <field name="request_date_from" invisible="1"/>
                                <field name="request_date_to" invisible="1"/>
                                <!-- half day or custom hours: only show one date -->
                                <label for="request_date_from" invisible="not request_unit_half and not request_unit_hours" string="Date" />
                                <label for="request_date_from" invisible="request_unit_half or request_unit_hours" string="Dates" />
                                <div class="o_row" invisible="not request_unit_half and not request_unit_hours">
                                    <field name="request_date_from" class="oe_inline" string="Date" readonly="state not in ('draft', 'confirm')" />
                                    <field name="request_date_from_period" invisible="not request_unit_half" required="request_unit_half"/>
                                </div>
                                <!-- full days: show date start/end with daterange -->
                                <div class="o_row" invisible="request_unit_half or request_unit_hours">
                                    <field
                                            name="request_date_from"
                                            widget="daterange"
                                            readonly="state not in ('draft', 'confirm')"
                                            required="not date_from or not date_to"
                                            options="{'end_date_field': 'request_date_to'}"/>
                                    <field name="request_date_to" invisible="1" />
                                </div>
                                <label for="request_unit_half" string="" invisible="leave_type_request_unit == 'day'"/>
                                <div class="o_row o_row_readonly oe_edit_only" style="margin-left: -2px;" invisible="leave_type_request_unit == 'day'">
                                    <field name="request_unit_half" class="oe_inline" invisible="leave_type_request_unit == 'day'" readonly="state not in ('draft', 'confirm')" />
                                    <label for="request_unit_half" invisible="leave_type_request_unit == 'day'" />
                                    <field name="request_unit_hours" invisible="leave_type_request_unit != 'hour'" readonly="state not in ('draft', 'confirm')" class="ms-5" />
                                    <label for="request_unit_hours" invisible="leave_type_request_unit != 'hour'" />
                                </div>
                                <label for="request_hour_from" string="" invisible="not request_unit_hours"/>
                                <div class="o_row o_row_readonly" invisible="not request_unit_hours">
                                    <label for="request_hour_from" string="From" />
                                    <field name="request_hour_from" invisible="not request_unit_hours" readonly="state == 'validate'" required="request_unit_hours" />
                                    <label for="request_hour_to" string="To" />
                                    <field name="request_hour_to" invisible="not request_unit_hours" readonly="state == 'validate'" required="request_unit_hours" />
                                </div>

                                <label for="number_of_days_display" string="Duration" invisible="request_unit_half and leave_type_request_unit != 'hour'" />
                                <div name="duration_display" invisible="request_unit_half and leave_type_request_unit != 'hour'">
                                    <div invisible="request_unit_half or request_unit_hours">
                                        <field name="number_of_days_display" class="oe_inline" />
                                        <span class="ms-3">Days</span>
                                    </div>
                                    <div invisible="leave_type_request_unit != 'hour'" class="o_row">
                                        <field name="number_of_hours_text" />
                                    </div>
                                </div>
                                <field name="name" readonly="state not in ('draft', 'confirm')" widget="text" placeholder="Add a description..." />
                                <field name="user_id" invisible="1" />
                                <field name="leave_type_support_document" invisible="1" />
                                <label for="supported_attachment_ids" string="Supporting Document" invisible="not leave_type_support_document or state not in ('draft', 'confirm', 'validate1')" />
                                <field name="supported_attachment_ids" widget="many2many_binary" nolabel="1" invisible="not leave_type_support_document or state not in ('draft', 'confirm', 'validate1')" />
                            </group>
                        </div>
                    </div>
                </sheet>
<!--                <div class="o_attachment_preview"/>-->
<!--                <div class="oe_chatter">-->
<!--                    <field name="message_follower_ids"/>-->
<!--                    <field name="activity_ids"/>-->
<!--                    <field name="message_ids" options="{'post_refresh': 'always'}"/>-->
<!--                </div>-->
            </form>
        </field>
    </record>

    <record id="hr_leave_view_sarya_custom_tree" model="ir.ui.view">
        <field name="name">hr.holidays.view.tree</field>
        <field name="model">hr.leave</field>
        <field name="arch" type="xml">
            <tree string="Time Off Requests" sample="1">
<!--                <field name="employee_id" column_invisible="True" readonly="state in ['cancel', 'refuse', 'validate', 'validate1']" />-->
<!--                <field name="all_employee_ids" widget="many2many_tags_avatar" decoration-muted="not active_employee" string="Employees" />-->
<!--                <field name="department_id" optional="hidden" readonly="state in ['cancel', 'refuse', 'validate', 'validate1']"/>-->
<!--                <field name="holiday_type" string="Mode" groups="base.group_no_one" readonly="state not in ['confirm', 'draft']"/>-->
                <field name="holiday_status_id" class="fw-bold" readonly="state in ['cancel', 'refuse', 'validate', 'validate1']"/>
                <field name="name"/>
                <field name="date_from" readonly="state in ['cancel', 'refuse', 'validate', 'validate1']"/>
                <field name="date_to" readonly="state in ['cancel', 'refuse', 'validate', 'validate1']"/>
                <field name="duration_display" string="Duration"/>
                <field name="state" widget="badge" decoration-info="state == 'draft'" decoration-warning="state in ('confirm','validate1')" decoration-success="state == 'validate'"/>
<!--                <field name="active_employee" column_invisible="True"/>-->
<!--                <field name="category_id" column_invisible="True" readonly="state not in ['confirm', 'draft']"/>-->
<!--                <field name="user_id" column_invisible="True"/>-->
<!--                <field name="message_needaction" column_invisible="True"/>-->
<!--                <button string="Approve" name="action_approve" type="object"-->
<!--                        icon="fa-thumbs-up"-->
<!--                        invisible="state != 'confirm'"-->
<!--                        groups="hr_holidays.group_hr_holidays_responsible"/>-->
<!--                <button string="Validate" name="action_validate" type="object"-->
<!--                        icon="fa-check"-->
<!--                        invisible="state != 'validate1'"-->
<!--                        groups="hr_holidays.group_hr_holidays_responsible"/>-->
<!--                <button string="Refuse" name="action_refuse" type="object"-->
<!--                        icon="fa-times"-->
<!--                        invisible="state not in ('confirm', 'validate1')"-->
<!--                        groups="hr_holidays.group_hr_holidays_responsible"/>-->
<!--                <field name="activity_exception_decoration" widget="activity_exception"/>-->
            </tree>
        </field>
    </record>

</odoo>
